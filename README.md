# 青言速递（Qingyan Express）
> **介绍**：青言速递是一款面向校园的智慧通知平台，目标是把“群聊嘈杂、信息碎片、重要通知被淹没”这些问题变成过去式，让信息传达既高效又有人情味。

---

## 目录

* 项目背景
* 我们想解决的问题
* 核心亮点（为什么选择青言速递）
* 功能总览
* 技术栈与架构概览
* 快速上手（部署 & 使用）
* 关键接口示例（常用 API）
* 数据一致性与性能保障
* 安全与权限策略
* 模块说明（详细功能）
* 路线图（未来计划）
* 致谢

---

## 项目背景

在校园里，你可能同时被年级群、班级群、社团群、辅导员群“包围”。重要通知可能被普通聊天刷下去；老师层层转发导致信息延迟；不同渠道重复发布又浪费大家时间。青言速递就是为了解决这些痛点——把信息回归到「及时、权威、可追溯」的状态。

---

## 我们想解决的问题

* **群聊数量过载**：把分散在多个群的“重要公告”集中到一个权威入口。
* **传递链路滞后**：从“人工逐层转发”变为“发布即达”的闭环推送。
* **信息层级混乱**：通过分类、优先级和标签，让重要通知一眼可辨。
* **信息冗余重复**：避免同一条通知在多个群重复发布、浪费注意力。

---

## 核心亮点（为什么选择青言速递）

* **统一与权威**：建立校园级的官方通知入口，减少信息分散。
* **实时与可靠**：在线即时推送 + 离线邮件补偿，确保覆盖每一位师生。
* **可审计的流程**：发布 → 审核 → 推送 → 反馈 → 归档，每一步都有记录。
* **以人为本的交互**：公告可评论、点赞，支持师生互动并收集反馈，让技术更有温度。
* **易扩展**：预留微信小程序与更多系统对接接口，便于未来打通教务、后勤等系统。

---

## 功能总览

### 用户与权限

* 角色：管理员 / 相关负责人（教师/发布者）/ 学生
* 管理员：用户管理、公告审核/发布/撤回、系统配置、数据监控
* 发布者：撰写、编辑、提交、查看发布记录、回复评论
* 学生：查看、搜索、评论、点赞、查看个人通知历史

### 公告生命周期

* 支持富文本（图片、表格、链接）
* 标题、部门、目标受众、有效期、草稿、预览
* 提交审核 → 管理员审核 → 发布 / 驳回
* 支持定时发布、撤回、归档

### 推送与通知

* **WebSocket**：在线即时桌面/页面提醒
* **邮件（JavaMail）**：覆盖未在线用户，确保不漏发
* 支持多渠道接入（未来接入微信小程序推送）

### 搜索与分类

* 多维检索（标题、部门、时间、关键词、类型）
* 智能联想、模糊查询、筛选排序、分页展示
* 支持全文索引（若数据库版本支持）

### 互动与统计

* 评论、点赞（每人每条公告仅一次）
* 热门公告自动标识
* 仪表盘：近 7 日公告数与发布者趋势图

---

## 技术栈与架构概览

### 前端

* Vue 3、响应式布局、支持 PC/移动

### 后端

* Spring Boot（模块化服务，清晰分层：Controller → Service → Repository）
* RESTful API（JSON）

### 中间件

* Redis：热点缓存、点赞状态、浏览量计数
* WebSocket：实时推送
* JavaMail：邮件通知
* MyBatis / JPA：ORM 层选择（可配置）

### 数据库

* MySQL（结构化数据），关键字段建立索引；视数据库版本启用全文索引以加速检索

### 基础设施

* Nginx：静态资源 + 反向代理 + 负载均衡
* Docker：容器化部署（后端、MySQL、Redis、Nginx）
* CI/CD：Jenkins / GitLab CI（代码自动构建、测试、发布）

### 架构理念

分层清晰、模块独立、通信统一（HTTPS + JSON）、预留扩展（小程序、更多推送渠道）

---

## 快速上手（部署 & 使用）

> 这是本地开发 / 小规模内部测试的最小可运行流程，生产环境需补充配置（证书、规模化部署、备份与监控）。

### 前提

* Docker & Docker Compose 可选（推荐）
* JDK 11+、Maven、Node.js（前端开发）
* MySQL、Redis 可用或容器部署

### 克隆项目

```bash
git clone https://your-repo/qingyan-express.git
cd qingyan-express
```

### 后端（开发）

```bash
cd backend
# 修改 application.yml 的数据库、redis、邮件配置
mvn clean package
java -jar target/qingyan-backend.jar
```

### 前端（开发）

```bash
cd frontend
npm install
npm run dev
# 或构建 production
npm run build
```

### 使用（默认）

* 后端：`http://localhost:8080`
* 前端：`http://localhost:3000`（或本地 dev server 指定端口）

---

## 关键接口示例（常用 API）

> 这里只列举最常用、能快速上手的几个接口示例，真实项目请参考完整 API 文档与认证流程。

### 登录

```
POST /api/auth/login
请求体:
{
  "username": "user",
  "password": "pass"
}

成功响应:
200 OK
{
  "token": "Bearer eyJhbGci..."
}
```

### 创建公告

```
POST /api/announcements
Headers: Authorization: Bearer {token}
请求体:
{
  "title": "期末考试安排",
  "content": "<p>考试安排内容...</p>",
  "department": "教务处",
  "targetAudience": ["grade_3", "class_3A"],
  "publishTime": "2025-01-20T09:00:00",
  "expireTime": "2025-02-20T23:59:59"
}

成功响应: 200 OK
```

### 查询公告列表（分页）

```
GET /api/announcements?page=0&size=10&keyword=考试&categoryId=3
```

### 公告详情（并增加浏览计数）

```
GET /api/announcements/{id}
# 服务端会对 Redis 的计数器进行 INCR，并异步持久化到数据库
```

---

## 数据一致性与性能保障

* **浏览量设计**：前端读取详情时 `Redis.INCR(announcement_view_count:{id})`；将变更放入 Redis 队列，由定时任务（如每 5 分钟）批量持久化到 MySQL，降低 DB 写压力。
* **缓存策略**：首页与热门公告使用 Redis 缓存，缓存失效时回源数据库并更新缓存。
* **索引策略**：对高频查询字段（publish_time、category_id、author_id、title）建立组合索引；支持 MySQL 全文索引提高检索性能。
* **负载均衡**：Nginx + 多后端实例（横向扩展）应对峰值流量。

---

## 安全与权限策略

* **认证**：JWT Token（无状态），短期有效 + 刷新机制。
* **传输安全**：HTTPS（生产环境强制）。
* **输入防护**：后端对富文本做 XSS 过滤与白名单校验；使用参数化查询防止 SQL 注入（ORM + PreparedStatement）。
* **最小权限原则**：API 层基于角色控制访问权限（student / teacher / admin）。

---

## 模块说明（详细功能）

### 1. 用户管理模块（FU-01）

* 功能：注册、登录、个人信息、角色分配、账户冻结/解封
* 管理功能：管理员可批量导入用户（CSV）、查询用户行为日志

### 2. 公告管理模块（FU-02）

* 功能：草稿、编辑、提交审核、发布、定时发布、撤回、归档
* 支持附件托管（图片、文件）与版本记录

### 3. 分类与检索模块（FU-03）

* 功能：分类维护、关键词搜索、筛选、分页
* 优化：首页结果优先走 Redis 缓存

### 4. 点赞/评论与统计（FU-05）

* 点赞：Redis 去重，每人每公告一票；实时显示
* 评论：可回复、删除、管理员可隐藏不当评论
* 统计：仪表盘、近 7 日趋势、热门作者排行

---

## 路线图（未来计划）

* **短期（1-3 个月）**

  * 完善 API 文档、添加导入导出工具（CSV/Excel）
  * 支持小程序消息推送接入

* **中期（3-6 个月）**

  * 引入 AI 个性化推荐（根据阅读历史与兴趣推送）
  * 打通教务、后勤、图书馆等系统，建立信息汇流层

* **长期（6+ 个月）**

  * 多机构/学校多租户支持
  * 智能分析：舆情/反馈分析，帮助校方优化通知内容与形式



---

## 致谢

感谢每一位愿意花时间读完本 README 的师生与开发者。
青言速递不仅是工具，它希望变成校园里那个“知道你需要什么”的温柔小助手：告知你考试时间、带你参加活动、在你错过通知时替你补上一条温馨提醒。

---

> 如果你现在有一条要发布的通知——想象一下：只需写一次，它就会送达所有需要的人，而不是被无尽的群消息淹没。
> 这就是我们想要的校园日常：**少些噪音，多些重要。**

---

**开始体验 →** 克隆仓库并按照部署文档进行部署
